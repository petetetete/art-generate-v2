function ArtManager(a,b,c){b=void 0===b?500:b;c=void 0===c?500:c;a.width=b;a.height=c;this.canvas=a;this.context=a.getContext("2d");this.width=b;this.height=c;this.palette="cool";this.pixelSize=1}ArtManager.prototype.setWidth=function(a){a=parseInt(a);this.width=this.canvas.width=a};ArtManager.prototype.setHeight=function(a){a=parseInt(a);this.height=this.canvas.height=a};ArtManager.prototype.setPixelSize=function(a){this.pixelSize=parseInt(a)};
ArtManager.prototype.setPalette=function(a){this.palette=a};
ArtManager.prototype.generate=function(){for(var a=new Uint8ClampedArray(this.width*this.height*4),b=0;b<this.height;b+=this.pixelSize)for(var c=0;c<this.width;c+=this.pixelSize)for(var e=this.palettes[this.palette](),h=Math.min(b+this.pixelSize,this.height),k=Math.min(c+this.pixelSize,this.width),f=b;f<h;f++)for(var g=c;g<k;g++){var d=4*(f*this.width+g);a[d]=e[0];a[d+1]=e[1];a[d+2]=e[2];a[d+3]=255}b=this.context.createImageData(this.width,this.height);b.data.set(a);this.context.putImageData(b,0,
0)};ArtManager.prototype.palettes={warm:function(){return[getRandomInt(150,255),getRandomInt(0,100),getRandomInt(0,100)]},cool:function(){return[getRandomInt(0,80),getRandomInt(0,80),getRandomInt(150,220)]},natural:function(){return[getRandomInt(25,100),getRandomInt(80,180),getRandomInt(25,100)]}};
var perfTests=[],app=new ArtManager(document.getElementById("canvas"),1E3,1E3),button=document.getElementById("draw"),width=document.getElementById("width"),height=document.getElementById("height"),pixel=document.getElementById("pixel"),palette=document.getElementById("palette");button.onclick=function(){var a=performance.now();app.generate();var b=performance.now();document.getElementById("time").innerText=Math.round(b-a)+"ms";perfTests.push(b-a)};width.onchange=function(a){return app.setWidth(a.target.value)};
height.onchange=function(a){return app.setHeight(a.target.value)};pixel.onchange=function(a){return app.setPixelSize(a.target.value)};palette.onchange=function(a){return app.setPalette(a.target.value)};function getRandomInt(a,b){return Math.floor(Math.random()*(b-a+1))+a};
